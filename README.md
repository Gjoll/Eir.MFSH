# MFSH

FSH prepropcessor

## Installation

Open Visual Studio Package Manager Console, and type the following.

dotnet tool install --global Eir.MFSH --version 2.0.5

to upgrade,

dotnet tool uninstall --global Eir.MFSH

dotnet tool install --global Eir.MFSH --version 2.0.5

## Command Line Option

MFSH has only one optional command line option. This option is the name of the 
json configuration file that configures the watches.
If no name is passed on the command line, then the config file defaults to

MFSH.json

## Options file

MFSH is controlled from a user defined json file. 

```json
{
	"baseInputDir": "{path}",
	"baseOutputDir": "{path}",
	"baseUrl": "{url}",
	"mfshPaths": [
		"MFSH"
	],
	"defines": [
		{
			"name": "%GraphDir%",
			"value": "..\\GraphFiles"
		}
	],
	"cleanDirs": [
		{
			"path": "..\\build\\input\\pagecontent",
			"filter": "StructureDefinition-*-intro.xml"
		}
	]
}```

The format of this file is json.
| name | meaning |
| ---- | -------------- |
| {baseInputDir} | Base Input Dir. The output path is computed by taking the input path minus its base dir and adding the output dir |
| {baseOutputDir} | Base dir of all output files |
| {baseUrl} | Fhir base url for all profiles being generated by this project.  |
| {working dir} | Sets the working dir used when a command is executed. |
| {mfshPaths} | Array of input files/directories to process. All *.minc and *.mfsh files referenced here will be processed |
| {defines} | Define variable values. When processing mfsh content, these variables can be referenced |
| {cleanDirs} | Optional array of directories to clean. At startup all files in the path matching the file filter will be scanned. If they are not updated during the running of the program they will be deleted at program conclusion |

## MFSH Grammar

	To Be Documented Real Soon Now
